#!/usr/bin/env bash

#: TITLE: crc-help
#: DATE: 2019-04-23
#: VERSION: 0.1.0
#: AUTHOR: "Alex Y" <aleksandryackovlev@yandex.ru>
#: DESCRIPTION: Help information

[[ $crcHelpLoaded ]] && return

source ./crc-env
source ./crc-utils

# DESCRIPTION: Print the usage information
# USAGE: usage
showUsageInfo() {
  printf "%s - %s\n" "$(crc-env scriptName)" "$(crc-env description)"
  printf "USAGE: %s\n" "$(crc-env usage)"
}

# DESCRIPTION: Print the version information
# USAGE: version
showVersionInfo() {
  printf "%s version %s\n" "$(crc-env scriptName)" "$(crc-env version)"
  printf "by %s\n" "$(crc-env author)"
}

# DESCRIPTION: The entry point for the crc-help
# USAGE: crc-help [COMMAND]
crc-help() {
  local commandToExec
  commandToExec="$1"
  shift

  if [[ -z $commandToExec ]]; then
    showUsageInfo
    die "$(crc-env successCode)"
  fi

  case $commandToExec in
    usage)
        showUsageInfo
        die "$(crc-env successCode)"
      ;;
    version)
        showVersionInfo
        die "$(crc-env successCode)"
      ;;
    *)
        die "$(crc-env misuseErrorCode)" "An unknown command crc-help ""$commandToExec"
      ;;
  esac
}

crcHelpLoaded=1
